<!-- Bootstrap template  -->
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Upload Article</title>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/navbar-bottom/">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  </link>
  <link rel="stylesheet" href="../../styles/unsplashSearch.css">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    .swal2-popup {
      width: auto !important;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--clr-white);
      display: grid;
      grid-template-rows: auto 1fr auto;
      row-gap: 1rem;
      box-shadow: var(--clr-red-dark);
      transition: var(--transition);
      transform: translate(-100%);
      /* 用此屬性控制縮放 */
    }

    .show-sidebar {
      transform: translate(0);
    }

    .container {
      margin-top: 90px;


      align-items: flex-start;
      flex-wrap: wrap;
      align-content: flex-start;
    }

    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    .bd-placeholder-img-footer {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    .dropdown-toggle {
      border: none
    }

    .dropend {
      border: none;
      position: fixed
    }

    div.scrollmenu {
      border: 2px;
      border-radius: 10px;
      background-color: #333;
      overflow: auto;
      white-space: nowrap;
    }

    div.scrollmenu a {
      display: inline-block;

      text-align: center;
      padding: 14px;
      text-decoration: none;
      border-right: inset #ACC0D8 1px;
    }

    div.scrollmenu a:hover {
      background-color: #777;
    }

    /* sidebar dropdown 的部分 */
    /* Fixed sidenav, full height */
    .sidenav {
      height: 100%;
      width: 200px;
      position: fixed;
      z-index: 1;
      top: 0;
      left: 0;
      background-color: #111;
      overflow-x: hidden;
      padding-top: 20px;
    }

    /* Style the sidenav links and the dropdown button */
    .sidenav a,
    .dropdown-btn {
      padding: 6px 8px 6px 16px;
      text-decoration: none;
      font-size: 20px;
      color: #818181;
      display: block;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
      outline: none;
    }

    /* On mouse-over */
    .sidenav a:hover,
    .dropdown-btn:hover {
      color: #f1f1f1;
    }

    /* Main content */
    .main {
      margin-left: 200px;
      /* Same as the width of the sidenav */
      font-size: 20px;
      /* Increased text to enable scrolling */
      padding: 0px 10px;
    }

    /* Add an active class to the active dropdown button */
    .active {

      color: white;
    }

    /* Dropdown container (hidden by default). Optional: add a lighter background color and some left padding to change the design of the dropdown content */
    .dropdown-container {
      display: none;
      background-color: #262626;
      padding-left: 8px;
    }

    /* Optional: Style the caret down icon */
    .fa-caret-down {
      float: right;
      padding-right: 8px;
    }

    /*  */
    /* sidebar 縮放功能 */
    .card-text {
      display: -webkit-box;
      max-width: 200px;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      overflow-wrap: anywhere;
      overflow: hidden;
    }

    a {

      text-decoration: none;
    }
  </style>
  <link rel="stylesheet"
    href="https://rawcdn.githack.com/darkterminal/tagin/6fa2863c13aa1841f33cf6dcbbf266c92fbf5412/dist/css/tagin.min.css">

  <link rel="stylesheet" href="../../styles/index.css">
  <style>
    .article-container {
      margin-top: 66px;
    }

    h1 {
      margin-top: 5px;
    }

    #articleContainer {
      align-items: unset;
      flex-wrap: unset;
    }
  </style>
  <link rel="stylesheet" href="../../styles/header.css">
  <link rel="stylesheet" href="../../styles/sidebars.css">
</head>

<body>
  <%- include("../components/header")%>
    <div class="row" style="width:100%">
      <%- include("../components/sidebar") %>
        <div
          class="w3-card-4  col-10 container d-flex flex-row justify-content-center position-relative w3-margin-bottom"
          style="width:80%;border-radius:15px">
          <form id="articleForm">
            <div id="articleContainer" class="
                    container
                    d-flex
                    flex-column
                    justify-content-center
                    article-container
                  ">
              <h1>新增文章 </h1>
              <div class="form-floating mb-2 mt-2">
                <textarea name="title" class="form-control title" placeholder="Leave a comment here"
                  id="floatingTextarea"></textarea>
                <label for="floatingTextarea">文章標題*</label>
              </div>
              <div class="form-floating">
                <h3 class="my-2">文章內容*</h3>
                <textarea name="markdown" class="form-control articleContent" placeholder="Leave a comment here"
                  id="floatingTextarea2" style="height: 400px"></textarea>
                <label for="floatingTextarea2"></label>
              </div>
              <div class="form-floating d-none">
                <h3 class="my-2">文章簡介（置於縮圖上）</h3>
                <textarea name="markdown" class="form-control" placeholder="Leave a comment here" id="description"
                  style="height: 100px"></textarea>
                <label for="floatingTextarea2"></label>
              </div>
            </div>

            <div class="my-4 d-flex flex-row article-container container justify-content-center align-items-stretch">
              <!-- 分類看板選單 -->
              <div class="container col-3 lead border p-3 mt-3">
                <label for="category" class="form-label mb-0">分類看板*</label><br>
                <hr class="mt-1 mb-3">
                <select class="w3-border-top" name="category" id="category" style="width:100px">
                  <option value="生活">生活</option>
                  <option value="娛樂">娛樂</option>
                  <option value="時尚">時尚</option>
                  <option value="社會">社會</option>
                  <option value="財經">財經</option>
                  <option value="感情">感情</option>
                  <option value="商業">商業</option>
                  <option value="藝術">藝術</option>
                  <option value="工作">工作</option>
                  <option value="國際">國際</option>
                  <option value="政治">政治</option>
                  <option value="3C">3C</option>
                  <option value="科技">科技</option>
                  <option value="體育">體育</option>
                  <option value="遊戲">遊戲</option>
                  <option value="迷因">迷因</option>

                </select>
              </div>
              <!--  -->
              <!-- tag 選單 -->
              <div class="container col-3 lead border p-3 mt-3">
                <label for="tag" class="form-label ">新增標籤（Tag）*
                  <hr class="mt-1 m-0">按空白鍵新增
                </label>

                <input type="text" list="tagOptions" id="tag" placeholder="新增 Tag" name="tags"
                  class="form-control tagin" data-separator=" " value="">

              </div>

              <div class="container col-3 lead border p-3 mt-3">
                <label for="articleCover" class="form-label ">文章封面照片*
                  <hr class="mt-1">
                  <input class="form-control" type="file" id="articleCover" placeholder="新增文章封面照片" />
                </label>
                <div>
                  <button class="btn-unsplash" id="showUnsplash">使用
                    Unsplash 圖庫</button>
                </div>
                <div class="d-flex justify-content-center w3-margin">
                  <div id="imgPreview" style="width:306px;height:306px;background-repeat:no-repeat;
                background-position: center;
                
                background-size: cover;"></div>
                </div>
              </div>
              <div class="
                      d-flex
                      container-fluid
                      
                      lead
                      p-3
                      mt-3
                      align-items-center
                      justify-content-center
                    ">
                <button class="flex-grow-1 btn btn-secondary" id="uploadBtn">上傳！</button>
              </div>
          </form>
          <main>
            <div id="id01" class="w3-modal">
              <div class="w3-modal-content">
                <div class="container w3-card-4" style="margin-top: 20px;border-radius:10px;min-height: 80vh;">
                  <h1 class="h1">搜尋 Unsplash 照片</h1>

                  <form class="js-form">
                    <input type="textt" class="search-input-us js-search-input" placeholder="搜尋圖片" autofocus>
                    <button type="submit" class="btn-unsplash-go">Go</button>
                  </form>

                  <div class="result-stats js-result-stats"></div>
                  <hr style="width: 50%;margin:auto">
                  <ul class="search-results js-search-results d-flex flex-wrap" style="margin:0 -8px -8px 0"
                    id="imgContainer">
                  </ul>

                  <div class="pagination justify-content-center">
                    <button class="hidden prev-btn js-prev"><a
                        style="text-decoration: none; color: white;">上一頁</a></button>
                    <button class="hidden next-btn js-next"><a
                        style="text-decoration: none; color: white;">下一頁</a></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="spinner js-spinner hidden">
              <div class="double-bounce1"></div>
              <div class="double-bounce2"></div>
            </div>
          </main>
        </div>
    </div>

    <!-- footer -->
    </div>

    <% if(firstTime) {%>
      <span id="firstTime" class="d-none">
        <%= firstTime %>
      </span>
      <% } %>

        <%- include("../components/footer") %>
          <script src="https://code.jquery.com/jquery-latest.min.js"></script>
          <script
            src="https://rawcdn.githack.com/darkterminal/tagin/6fa2863c13aa1841f33cf6dcbbf266c92fbf5412/dist/js/tagin.min.js"></script>
          <script>
            tagin(document.querySelector('.tagin'));
          </script>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
          <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          <script>

            const url = "/user/authenticateonly"
            fetch(url, {
              method: "GET",
            }).then((res) => {

              if (res.status !== 200) {
                Swal.fire({
                  icon: "warning",
                  title: "請先登入",
                  showConfirmButton: false,
                  timer: 1500,
                }).then(() => {
                  self.location.href = "/user/profile"
                })
              }

              return res.json()
            }).catch((e) => {
              console.log(e)

            })
          </script>


          <script src="../../js/newmd_f.js"></script>
          <script src="../../js/sidebars.js"></script>
          <script src="../../js/header.js"></script>
          <script src="../../js/unsplashSearch.js"></script>
</body>

</html>